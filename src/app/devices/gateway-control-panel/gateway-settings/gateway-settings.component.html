<div class="topnavbar bg-white py-2">
  <div class="row">

    <ul class="nav">

      <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" (click)="onClickOfTab('Test Connection')" [class.disabled]="isSaveSettingAPILoading">
          <i class="fa fa-fw fa-plug"></i>
          <span class="text-secondary">Test Connection</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" (click)="onClickOfTab('Manage Applications')" [class.disabled]="isSaveSettingAPILoading">
          <i class="fa fa-fw fa-microchip"></i>
          <span class="text-secondary">Manage Applications</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" (click)="onClickOfTab('Manage Devices')" [class.disabled]="isSaveSettingAPILoading">
          <i class="fa fa-fw fa-laptop"></i>
          <span class="text-secondary">Manage Devices</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" (click)="onClickOfTab('Register Properties')" [class.disabled]="isSaveSettingAPILoading">
          <i class="fa fa-fw fa-building-o"></i>
          <span class="text-secondary">Register Properties</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" (click)="onClickOfTab('Settings')" [class.disabled]="isSaveSettingAPILoading">
          <i class="fa fa-fw fa-cog"></i>
          <span class="text-secondary">Settings</span></a>
      </li>
    </ul>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <hr class="solid">
    </div>
  </div>

</div>

<div class="con-pad">
  <ng-container *ngIf="selectedTab === 'Test Connection'">
    <div class="row mt-1 mx-auto">
      Check gateway is connected or not, &nbsp;
      <a class="d-none d-sm-inline-block btn btn-sm btn-warning shadow-sm mb-1" href="javascript:void(0)"
      (click)="testConnectionWithGateway()" [class.disabled]="isTestConnectionAPILoading">
        Test Connection</a>  <i *ngIf="isTestConnectionAPILoading" class="fa fa-spinner fa-spin fa-fw fa-2x text-center"></i>
    </div>
    <div class="row mt-1 mx-auto" *ngIf="testConnectionMessage">
      <span [ngClass]="{'alert-success': testConnectionMessage.toLowerCase().includes('success'),
      'alert-danger': testConnectionMessage.toLowerCase().includes('not connected')}"> {{testConnectionMessage}} </span>
    </div>
  </ng-container>
  <ng-container *ngIf="selectedTab === 'Manage Applications'">
    <app-manage-applications [device]="device" [deviceTwin]="deviceTwin" (refreshDeviceTwin)="getDeviceTwinData()"></app-manage-applications>
  </ng-container>
  <ng-container *ngIf="selectedTab === 'Manage Devices'">
    <app-register-devices [device]="device" [deviceTwin]="deviceTwin" (refreshDeviceTwin)="getDeviceTwinData()" [pageType]="'register-devices'"></app-register-devices>
  </ng-container>
  <ng-container *ngIf="selectedTab === 'Register Properties'">
    <app-register-properties [device]="device" [deviceTwin]="deviceTwin" (refreshDeviceTwin)="getDeviceTwinData()"></app-register-properties>
  </ng-container>
  <ng-container *ngIf="selectedTab === 'Settings'">
    <accordion [closeOthers]="'true'">
      <accordion-group heading="" [panelClass]="'customClass'" >
        <ng-container  accordion-heading>
          <button class="btn" type="button">
              Telemetry Parameter Setting
          </button>
        </ng-container>
        <app-register-devices [device]="device" [deviceTwin]="deviceTwin" (refreshDeviceTwin)="getDeviceTwinData()" [pageType]="'telemetry-settings'"></app-register-devices>
      </accordion-group>
    </accordion>
  </ng-container>
</div>

<!-- <div class="con-pad" *ngIf="device?.tags?.settings">

  <div class="row mt-1 mx-auto">

    <div class="col-xl-6 col-lg-6">
      <h1 class="h6 mb-3 text-secondary-400 "><b>Normal Telemetry Mode Settings:</b></h1>
      <div class="table-responsive">
        <table class="table table-bordered  table-striped text-gray-800" id="dataTable" width="100%" cellspacing="0">

          <tbody>
            <tr>
              <td style="width: 50%;">Frequency (In Sec): </td>
              <td>
                  <input type="number" class="form-control form-control-sm bg-light border-0 small"
                    [(ngModel)]="device.tags.settings.normal_mode.frequency" name="frequency_in_normal"
                    placeholder="Frequency">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row mt-1 mx-auto">

    <div class="col-xl-6 col-lg-6">

      <h1 class="h6 mb-3 text-secondary-400"><b>Turbo Telemetry Mode Settings:</b></h1>
      <div class="table-responsive">
        <table class="table table-bordered  table-striped text-gray-800" id="dataTable" width="100%" cellspacing="0">

          <tbody>
            <tr>
              <td style="width: 50%;">Frequency (In Sec): </td>
              <td>

                  <input type="number" class="form-control form-control-sm bg-light border-0 small"
                    [(ngModel)]="device.tags.settings.turbo_mode.frequency" name="frequency_in_turbo"
                    placeholder="Frequency">
              </td>
            </tr>
            <tr>
              <td >Turbo mode Timeout (In Sec): </td>
              <td>
                  <input type="number" class="form-control form-control-sm bg-light border-0 small"
                    [(ngModel)]="device.tags.settings.turbo_mode.timeout_time" name="timeout_in_turbo"
                    placeholder="Timeout">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div> -->
