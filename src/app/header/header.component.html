<!-- Header for Normal routes except login app selection -->
<nav class="navbar navbar-expand navbar-light bg-white topbar static-top" *ngIf="!isLoginRoute && userData">
  <button id="sidebarToggleTop" class="btn btn-link rounded-square mr-3" (click)="onSidebarToggle()">
    <i class="fa fa-bars"></i>
  </button>
  <a class="d-flex align-items-center" *ngIf="!userData?.is_super_admin" href="javascript:void(0)"
    (click)="redirectToFirstMenu()">
    <img src="{{blobStorageURL + contextApp?.metadata?.header_logo?.url + blobToken}}"
      class="d-block img-fluid img-logo">
  </a>
  <a class="d-flex align-items-center" *ngIf="userData?.is_super_admin" [routerLink]="['applications']">
    <img src="../../assets/img/KemPaas-Logo-Blue.png" style="width: 60%;" class="d-block img-fluid img-logo">
  </a>

  <ul class="navbar-nav ml-auto">
    <div class="topbar-divider d-none d-sm-block"></div>
    <li class="nav-item dropdown no-arrow">
      <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        <img class="img-profile rounded-circle mr-3" src="../../assets/img/user.png">
        <span class="d-block">

          <span class="text-gray-600">{{userData?.name}}</span>
          <span class="d-block text-grey small">{{contextApp?.app}}</span>
          <small class="d-block text-grey ">{{contextApp?.user?.role}}</small>
        </span>
      </a>
      <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
        <a class="dropdown-item" href="javascript:void(0)">
          <i class="fa fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
          Profile
        </a>
        <a class="dropdown-item" href="javascript:void(0)" (click)="openChangePasswordModal()"
          *ngIf="isGuestUser !== 'true'">
          <i class="fa fa-key fa-sm fa-fw mr-2 text-gray-400"></i>
          Change Password
        </a>
        <a class="dropdown-item" href="javascript:void(0)">
          <i class="fa fa-list fa-sm fa-fw mr-2 text-gray-400"></i>
          Activity Log
        </a>
        <div class="dropdown-divider"></div>
        <ng-container *ngIf="decodedToken?.privileges && decodedToken.privileges.indexOf('APMV') > -1">
          <a class="dropdown-item" [routerLink]="['applications', this.contextApp?.app, 'settings']"
            routerLinkActive="active">
            <i class="fa fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
            Settings
          </a>
          <div class="dropdown-divider"></div>
        </ng-container>
        <ng-container *ngIf="userData?.apps?.length > 1">
          <a class="dropdown-item" [routerLink]="['applications', 'selection']" routerLinkActive="active">
            <i class="fa fa-th-large fa-sm fa-fw mr-2 text-gray-400"></i>
            Change Application
          </a>
          <div class="dropdown-divider"></div>
        </ng-container>
        <a class="dropdown-item" href="javascript:void(0)" (click)="openLogoutModal()">
          <i class="fa fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
          Logout
        </a>
      </div>
    </li>

  </ul>

</nav>
<!-- End of Header -->

<!-- Logout modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body">Select "Logout" below if you are ready to end your session.</div>
      <div class="modal-footer">
        <button class="btn btn-primary" type="button" (click)="onLogout()">Logout</button>
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
<!-- End of Logout modal -->

<!-- Header for Login route -->
<nav class="navbar navbar-expand navbar-light bg-white topbar static-top" style="height:5rem !important"
  *ngIf="isLoginRoute  && url.includes('login')">
  <ng-container *ngIf="defaultAppName !== 'SopanCMS'">
    <div class="container" id="header">
      <div class=""><a><img src="../../assets/img/KemPaas-Logo-Blue.png" style="width: 60%;"
            class="d-block img-fluid"></a>
      </div>
      <div class="ml-auto"><a><img src="../../assets/img/Kemsys-Logo.png" style="width: 80%;"
            class="d-none d-md-block img-fluid"></a>
      </div>
    </div>
  </ng-container>
</nav>
<!--End of Header for Login route -->

<!-- Header for App selection route -->
<nav class="navbar navbar-expand navbar-light bg-white topbar static-top"
  *ngIf="isLoginRoute && !url.includes('login')">
  <div class="container">
    <ng-container *ngIf="defaultAppName !== 'SopanCMS'">
      <a class="d-flex align-items-center">
        <img src="../../assets/img/KemPaas-Logo-Blue.png" style="width: 60%;" class="d-block img-fluid">
      </a>
    </ng-container>
    <ul class="navbar-nav ml-auto" *ngIf="!url.includes('login')">
      <li class="nav-item dropdown no-arrow">
        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          <img class="img-profile rounded-circle mr-3" src="../../assets/img/user.png">
          <span class="d-none d-md-block">
            <span class="text-gray-600">{{userData?.name}}</span>
          </span>
        </a>
        <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
          <a class="dropdown-item" href="javascript:void(0)">
            <i class="fa fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
            Profile
          </a>
          <a class="dropdown-item" href="javascript:void(0)" (click)="openChangePasswordModal()">
            <i class="fa fa-key fa-sm fa-fw mr-2 text-gray-400"></i>
            Change Password
          </a>
          <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
            <i class="fa fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
            Logout
          </a>
        </div>
      </li>
    </ul>
  </div>
</nav>
<!-- End of Header for app selection route -->

<!-- Change Password component -->
<app-reset-password [isFirstTimeLogin]="false" [loginData]="userData" (modalClose)="onModalClose()"
  *ngIf="isResetPassword"></app-reset-password>
