

<div id="wrapper"  >
  <div id="content-wrapper" class="d-flex flex-column m-5 py-3" *ngIf="isDeviceTypeDataLoading">
    Loading Model Data...
    <i class="fa fa-spinner fa-spin fa-fw fa-2x text-center"  ></i>
  </div>

  <!-- Sidebar -->
  <div class="sidebar1 sidebar-light mb-3 " *ngIf="!isDeviceTypeDataLoading">

    <div class="sidebar1-heading sidebar1-top-heading">
      <span>Model Definition </span>
      <!-- <button class="d-none d-md-inline mb-0" id="sidebar1Toggle" placement="bottom" tooltip="Minimize" (click)="onSidebarToggle()"></button> -->
      <i class="fa fa-fw fa" >MD</i>
		</div>
    <div class="scrollbox scrollbox_delayed" tabindex="0">
    <ul class="navbar-nav scrollbox-content" id="controlPanelSidebar">

      <ng-container *ngFor="let menu of menuItems">
        <ng-container *ngIf="menu.isTitle && menu.isDisplay">
        <div class="sidebar1-heading ">
          {{menu.display_name}}
        </div>
        <!-- Divider -->
        <hr class="sidebar1-divider">
        </ng-container>
        <ng-container *ngIf="!menu.isTitle && menu.visible">
        <!-- Nav Item - Dashboard -->
        <li class="nav-item" [ngClass]="{'active': activeTab === menu.page}">
          <a class="nav-link collapsed" href="{{menu.url}}" data-toggle="tab" aria-expanded="false"
            (click)="setActiveTab(menu.page)" [tooltip]="menu.display_name" [tooltip]="menu.display_name">
            <i class="{{menu.icon}}" placement="bottom" ></i>
            <span>{{menu.display_name}}</span></a>
        </li>
        </ng-container>
      </ng-container>

      <!-- Divider -->
      <hr class="sidebar1-divider d-none d-md-block">
    </ul>
  </div>
  </div>
  <!-- End of Sidebar -->
   <!-- Content Wrapper -->
   <div id="content-wrapper" class="d-flex flex-column" *ngIf="!isDeviceTypeDataLoading">
    <div id="content">
    <div class="container1-fluid">
      <div class="blue-nav-bar">

        <div class="d-flex">
          <div>
            <div class="main-heading">

              {{deviceType?.name}}
              <a href="javascript:void(0)" (click)="openUnfreezeModal()" [class.disabled]="isModelFreezeUnfreezeAPILoading"  *ngIf="deviceType.freezed"><i class="fa fa-fw fa-lock" placement="bottom" tooltip="Freezed"></i></a>
              <a href="javascript:void(0)" (click)="freezeModel()" [class.disabled]="isModelFreezeUnfreezeAPILoading"  *ngIf="!deviceType.freezed"><i class="fa fa-fw fa-unlock"  placement="bottom" tooltip="Not Freezed"  *ngIf="!deviceType.freezed"></i></a>
            </div>
          </div>
        </div>
      </div>

    <div class="">
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'overview'}" id="device_type_overview" role="tabpanel">
        <app-device-type-overview *ngIf="activeTab === 'overview' && deviceType" [deviceType]="deviceType"></app-device-type-overview>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'tags'}" role="tabpanel" id="device_type_tags">
        <app-device-type-tags *ngIf="activeTab === 'tags'  && deviceType" [deviceType]="deviceType"></app-device-type-tags>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'settings'}" role="tabpanel" id="device_type_settings">
        <app-device-type-settings *ngIf="activeTab === 'settings'  && deviceType" [deviceType]="deviceType"></app-device-type-settings>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab.includes('properties')}" role="tabpanel" id="device_type_properties">
        <app-device-type-properties *ngIf="activeTab.includes('properties') && deviceType" [type]="activeTab" [deviceType]="deviceType"></app-device-type-properties>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab.includes('direct_methods')}" role="tabpanel" id="device_type_methods">
        <app-device-type-device-methods *ngIf="activeTab.includes('direct_methods') && deviceType" [deviceType]="deviceType"></app-device-type-device-methods>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab.includes('package_management')}" role="tabpanel" id="device_type_package_management">
        <app-device-type-package-management *ngIf="activeTab.includes('package_management') && deviceType" [deviceType]="deviceType"></app-device-type-package-management>
      </div>


      <div class="tab-pane" [ngClass]="{'active': activeTab.includes('rules')}" role="tabpanel" id="device_type_rules">
        <app-device-type-rules *ngIf="activeTab.includes('rules') && deviceType" [deviceType]="deviceType"></app-device-type-rules>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'jsonpacket'}" role="tabpanel" id="device_type_jsonpacket">
        <app-device-type-json-packet-format *ngIf="activeTab === 'jsonpacket' && deviceType" [deviceType]="deviceType"></app-device-type-json-packet-format>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'alert_conditioning'}" role="tabpanel" id="device_type_alert_conditioning">
        <app-device-type-alert-conditions *ngIf="activeTab === 'alert_conditioning' && deviceType" [deviceType]="deviceType"></app-device-type-alert-conditions>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'control_widgets'}" role="tabpanel" id="device_type_control_widgets">
        <app-device-type-control-widgets *ngIf="activeTab === 'control_widgets' && deviceType" [deviceType]="deviceType"></app-device-type-control-widgets>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'configuration_widgets'}" role="tabpanel" id="device_type_configuration_widgets">
        <app-device-type-configuration-widgets *ngIf="activeTab === 'configuration_widgets' && deviceType" [deviceType]="deviceType"></app-device-type-configuration-widgets>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'layout'}" role="tabpanel" id="device_type_layout">
        <app-device-type-layout *ngIf="activeTab === 'layout' && deviceType" [deviceType]="deviceType"></app-device-type-layout>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'reference_material'}" role="tabpanel" id="device_type_reference_material">
        <app-device-type-reference-documents *ngIf="activeTab === 'reference_material' && deviceType" [deviceType]="deviceType"></app-device-type-reference-documents>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'derived_kpis'}" role="tabpanel" id="device_type_derived_kpis">
        <app-device-type-derived-kpis *ngIf="activeTab === 'derived_kpis' && deviceType"  [deviceType]="deviceType"></app-device-type-derived-kpis>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'stream_processing'}" role="tabpanel" id="device_type_stream_processing">
        <app-device-type-stream-processing *ngIf="activeTab === 'stream_processing' && deviceType"></app-device-type-stream-processing>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'alert_acknowledgement_reasons'}" role="tabpanel" id="device_type_alert_acknowledgement_reasons">
        <app-device-type-alert-acknowledgement-reasons *ngIf="activeTab === 'alert_acknowledgement_reasons' && deviceType" [deviceType]="deviceType"></app-device-type-alert-acknowledgement-reasons>
      </div>
      <div class="tab-pane" [ngClass]="{'active': activeTab === 'slave_info'}" role="tabpanel" id="device_type_slave_info">
        <app-device-type-slave-info *ngIf="activeTab === 'slave_info' && deviceType" [deviceType]="deviceType"></app-device-type-slave-info>
      </div>
      <!-- /.container1-fluid -->
    </div>
  </div>
  </div>
  </div>
  </div>

  <div class="modal fade" id="passwordCheckModal" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Unfreeze Model</h5>
          <button type="button" class="close"  aria-label="Close" (click)="onCloseModal('passwordCheckModal')" [disabled]="isModelFreezeUnfreezeAPILoading">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h6>Please Enter your password to unfreeze the modal.</h6>
          <form>
            <div class="form-group">
              <label for="message-text" class="col-form-label required">Email:</label>
              <input type="text" class="form-control form-control-sm" id="email" name="email" [(ngModel)]="userData.email"
                placeholder="Enter Email" disabled>
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label required">Password:</label>
              <input  type="{{this.isPasswordVisible ? 'text' : 'password'}}" class="form-control form-control-sm" id="display_name" name="display_name" [(ngModel)]="password"
                placeholder="Enter Your Password">
                <i class="fa fa-fw  field-icon-small toggle-password" (click)="togglePasswordVisibility()"
                        [ngClass]="{'fa-eye' : !this.isPasswordVisible, 'fa-eye-slash': this.isPasswordVisible}" ></i>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="unfreezeModel()" [disabled]="isModelFreezeUnfreezeAPILoading">
            Unfreeze</button>
          <button type="button" class="btn btn-white" (click)="onCloseModal('passwordCheckModal')" [disabled]="isModelFreezeUnfreezeAPILoading">
            Cancel
          </button>
          <i class="fa fa-spinner fa-spin fa-fw fa-2x" *ngIf="isModelFreezeUnfreezeAPILoading"></i>
        </div>
      </div>
    </div>
  </div>
