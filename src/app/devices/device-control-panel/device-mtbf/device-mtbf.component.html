<div class="topnavbar bg-white py-2">
  <div class="row">
    <div class="col-xl-12 col-md-12 mb-12" >
        <form>
          <div class="form-group form-inline my-1">
            <input type="number" min="1" class="form-control form-control-sm mr-1 my-1 record-input" id="inputEmail4" placeholder="No of Records"
            [(ngModel)]="filterObj.count" name="count" *ngIf="!filterObj.countNotShow">
            <div class="bg-dateRow form-group form-inline" id="dateRow"
            [style.width]="(filterObj.dateOption === 'date' ? '23rem' : (filterObj.dateOption === 'date range' ? '33rem' : ''))">
            <select class="form-control form-control-sm mx-1 my-1" id="dateoptions"
            [(ngModel)]="filterObj.dateOption" name="dateOptions" (change)="onDateOptionChange()">
              <option [ngValue]="undefined"> Quick Date Options </option>
              <option [ngValue]="'24 hour'">Last 24 hours</option>
              <option [ngValue]="'last 7 days'">Last 7 Days</option>
              <option [ngValue]="'this week'">This Week</option>
              <option [ngValue]="'this month'">This Month</option>
              <option [ngValue]="'date'">Select Date</option>
              <option [ngValue]="'date range'">Select Date Range</option>
            </select>
            <!-- <lab class="ml-1 mr-1">OR</lab el> -->
            <ng-container *ngIf="filterObj.dateOption === 'date'">
              <input #dt2Input [owlDateTime]="dt2" [max]="today"  (dateTimeChange)="onSingleDateChange($event);"
                class="form-control form-control-sm mx-2 my-1 w-10" [owlDateTimeTrigger]="dt2"
                placeholder="Select Date">
              <span [owlDateTimeTrigger]="dt2"  class="datepicker-calendar"><i class="fa fa-calendar"></i></span>
              <owl-date-time #dt2 [pickerType]="'calendar'"></owl-date-time>
            </ng-container>
            <ng-container *ngIf="filterObj.dateOption === 'date range'">
            <input [owlDateTime]="dt1" [selectMode]="'range'" [max]="today" #dt1Input
            (dateTimeChange)="onDateChange($event)" class="form-control form-control-sm mx-1 my-1 date-range-picket-width" [owlDateTimeTrigger]="dt1" placeholder="Select Date Time">
            <span [owlDateTimeTrigger]="dt1" class="datepicker-calendar"><i class="fa fa-calendar"></i></span>
            <owl-date-time #dt1></owl-date-time>
            </ng-container>
          </div>
            <button type="button" class="btn btn-warning btn-sm ml-3 mr-1 my-1" title="Search" (click)="searchMTBFEvents(this.filterObj)" ><i class="fa fa-search fa-sm"></i></button>
            <button type="button" class="btn btn-white btn-sm mx-1 my-1" title="Clear Filters" (click)="clear();">
              <img class="filter-clear-icon" src="./assets/img/filter.svg"></button>
          </div>
         </form>
    </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <hr class="solid">
      </div>
    </div>
</div>
<div class="con-pad">
  <div class="row mx-auto">

    <div class="table-responsive  table-wrapper" style="max-height: calc(100vh - 13rem)">
      <!-- <app-table [tableData]="lifeCycleEvents" [tableConfig]="eventTableConfig"
        [isTableFilterSelected]="isFilterSelected" [isTableDataLoading]="isLifeCycleEventsLoading"></app-table> -->
        <table class="table table-bordered  table-striped" id="deviceTable" width="100%" cellspacing="0">
          <thead>
            <th></th>
            <th>Event Start Time</th>
            <th>Event End Time</th>
            <th>TBF</th>
          </thead>
          <tfoot *ngIf="avrgMTBF && avrgMTBF > 0 && isFilterSelected">
            <tr>
              <td class="text-right" colspan="3"> MTBF</td>
              <td colspan="2">{{avrgMTBFString}}</td>
            </tr>
          </tfoot>
          <tbody>
            <ng-container *ngIf="lifeCycleEvents.length > 0 && isFilterSelected">
              <tr *ngFor="let event of lifeCycleEvents; let i = index">
                <td>{{i + 1}}</td>
                <td>{{event.local_event_start_time}}</td>
                <td>{{event.local_event_end_time}}</td>
                <td>{{event.mtbf}}</td>
              </tr>
            </ng-container>
            <ng-container *ngIf="lifeCycleEvents.length === 0 && !isLifeCycleEventsLoading  && isFilterSelected">
              <tr>
                <td colspan="5">
                  No TBF data found.
                </td>
              </tr>
            </ng-container>
            <ng-container *ngIf="lifeCycleEvents.length === 0 && !isLifeCycleEventsLoading && !isFilterSelected">
              <tr>
                <td colspan="5">Select filter and press search button to load the TBF data.</td>
              </tr>
            </ng-container>
            <ng-container *ngIf="isLifeCycleEventsLoading">
              <tr>
                <td colspan="5">
                  <i class="fa fa-spinner fa-spin fa-fw fa-2x"></i>
                </td>
              </tr>
            </ng-container>
          </tbody>
        </table>
    </div>
  </div>
</div>
