<!-- Page Heading -->
<!-- <div class="d-sm-flex align-items-center justify-content-between mb-2 pt-3">
  <h1 class="h3 mb-0 text-gray-800">C2D</h1>
</div> -->

<div class="row mx-auto mt-3">

  <ul class="nav">
      <!-- Nav Item - Tables -->
      <li class="nav-item">
        <a class="nav-link"  href="javascript:void(0)" (click)="displayMode = 'view'">
          <i class="fas fa-fw fa-eye"></i>
          <span>View</span></a>
      </li>
    <!-- Nav Item - Charts -->
    <li class="nav-item">
      <a class="nav-link" href="javascript:void(0)" (click)="displayMode = 'compose'">
        <i class="fas fa-fw fa-edit"></i>
        <span>Compose</span></a>
    </li>


  </ul>

</div>
<div class="row mt-n3">
  <div class="col-lg-12">
    <hr class="solid">
  </div>
</div>

<ng-container *ngIf="displayMode === 'view'">
<!-- <div class="col-xl-12 col-md-12 mb-12">
  <div class="card shadow h-100 py-2 px-2">
    <form>
      <div class="form-group form-inline my-1">
        <input type="number" min="1" class="form-control form-control-sm mx-1 my-1" id="inputEmail4"
          placeholder="No of Records" [(ngModel)]="c2dMsgFilter.count" name="count">
        <input type="text" class="form-control form-control-sm mx-1 my-1" id="inputEmail4" placeholder="MessageId"
          [(ngModel)]="c2dMsgFilter.message_id" name="message_id">
        <select class="form-control form-control-sm mx-1 my-1" id="dateoptions" placeholder="Date Options"
          [(ngModel)]="c2dMsgFilter.dateOption" name="dateOptions">
          <option value="5 mins">Last 5 minutes</option>
          <option value="30 mins">Last 30 minutes</option>
          <option value="1 hour">Last 1 hour</option>
          <option value="24 hour">Last 24 hours</option>
          <option value="custom">Custom</option>
        </select>
        <ng-container *ngIf="c2dMsgFilter?.dateOption === 'custom'">
          <mat-date-range-picker #picker></mat-date-range-picker>
          <mat-date-range-input [rangePicker]="picker" class="form-control form-control-sm mx-1 my-1">
            <input matStartDate [(ngModel)]="c2dMsgFilter.from_date" name="from_date">
            <input matEndDate [(ngModel)]="c2dMsgFilter.to_date" name="to_date">
          </mat-date-range-input>

          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        </ng-container>
        <button type="button" class="form-control btn btn-warning btn-sm mx-1 my-1"
          (click)="searchHeartBeat()">Search</button>
        <button type="button" class="form-control btn btn-light btn-sm mx-1 my-1">Clear</button>

      </div>
    </form>
  </div>
</div>
<div class="row mt-n3">
  <div class="col-lg-12">
    <hr class="solid">
  </div>
</div> -->
<app-filter [filterObj]="c2dMsgFilter" (filterSearch)="searchC2DMessages($event)"></app-filter>

<div class="row  mx-auto mt-3">

  <div class="table-responsive">
    <table class="table table-striped" id="dataTable" width="100%" cellspacing="0">
      <thead>
        <tr class="bg-secondary text-white">
          <th>Time Stamp</th>
          <th class="border-left">Issued By</th>
          <th class="border-left">Message ID</th>
          <th class="border-left">TTL</th>
          <th class="border-left">ACK</th>
          <th class="border-left">Feedback</th>
          <th class="border-left">F Time Stamp</th>
          <th class="border-left">Message</th>
          <th class="border-left">Response</th>

        </tr>
      </thead>

      <tbody>
        <ng-container *ngIf="c2dMsgs.length > 0 && !isC2dMsgsLoading">
        <tr *ngFor="let msg of c2dMsgs">
          <td>{{msg.created_date}}</td>
          <td></td>
          <td>{{msg.message_id}}</td>
          <td></td>
          <td>{{msg?.application_properties?.acknowledge}}</td>
          <td>{{msg?.feedback}}</td>
          <td></td>
          <td>
            <a (click)="loadMessageDetail(msg)" href="javascript:void(0)" data-toggle="modal"
            data-target="#c2dmessageModal" data-backdrop="static" data-keyboard="false"><i class="fas fa-fw fa-eye"></i></a></td>
          <td>
            <a (click)="loadResponseDetail(msg)" href="javascript:void(0)" data-toggle="modal"
            data-target="#c2dmessageModal" data-backdrop="static" data-keyboard="false"><i class="fas fa-fw fa-eye"></i></a></td>
        </tr>
      </ng-container>
        <ng-container *ngIf="c2dMsgs.length === 0 && !isC2dMsgsLoading && isFilterSelected">
          <tr>
            <td colspan="9">No messages found.</td>
          </tr>
        </ng-container>
        <ng-container *ngIf="c2dMsgs.length === 0 && !isC2dMsgsLoading && !isFilterSelected">
          <tr>
            <td colspan="9">Select filter and press search button to load the C2D messages.</td>
          </tr>
        </ng-container>
        <ng-container *ngIf="isC2dMsgsLoading">
          <tr>
            <td colspan="9">
              <i class="fa fa-spinner fa-spin fa-fw fa-2x"></i>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>
</ng-container>
<ng-container *ngIf="displayMode === 'compose'">
	<div class="row mx-auto">


    <div><a  ><button type="button" clpass="btn btn-warning contact-form" > 1. Validate</button></a></div>
    <div class='col-sm-1 px-0'><hr></div>

    <div><a  ><button type="button" class="btn btn-warning" > 2. Send</button></a></div>
    <div class='col-sm-1 px-0'><hr></div>

    <div><a ><button type="button" class="btn btn-warning"> 3. Feedback</button></a></div>
    <div class='col-sm-1 px-0'><hr></div>

    <div><a  ><button type="submit" class="btn btn-warning" > 4. Response</button></a></div>


  <!--<div class="btn-group btn-group-justified" role="group" aria-label="Basic example">
    <button type="button" class="btn btn-warning">Left</button>
    <button type="button" class="btn btn-warning">Middle</button>
      <button type="button" class="btn btn-warning">Middle</button>
    <button type="button" class="btn btn-warning">Right</button>
  </div>-->

</div>
<div class="row">
  <div class="col-lg-12">
    <hr class="solid">
  </div>
</div>

<div class="row">
  <div class="col-lg-6 col-xl-6">
<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-2 pt-3">
  <h6 class="h6 mb-0 text-gray-800">Meta Data:</h6>
</div>

  <div class="table-responsive">
          <table class="table table-striped table-bordered" id="dataTable" width="100%" cellspacing="0">
             <thead>
              <tr class="bg-secondary text-white">
                <th>Key</th>
                <th class="border-left">Value</th>

              </tr>
            </thead>
           <!--<tfoot>
              <tr>
                <th>Name</th>
                <th>Position</th>
                <th>Office</th>
                <th>Age</th>
                <th>Start date</th>
                <th>Salary</th>
              </tr>
            </tfoot>-->
            <tbody>
              <tr>
                <td>Device ID</td>
                <td></td>
    </tr>
              <tr>
                <td>Message ID</td>
                <td></td>
    </tr>
    <tr>
                <td>TTL</td>
                <td></td>
    </tr>
              <tr>
                <td>ACK</td>
                <td></td>
    </tr>

            </tbody>
          </table>
        </div>
       </div>

<div class="col-lg-6 col-xl-6">
<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-2 pt-3">
  <h6 class="h6 mb-0 text-gray-800">Message Body / Message JSON:</h6>
</div>

<form id="contact-form">
  <div class="form-group">
  <textarea class="form-control" id="message" rows="9" placeholder="Please type your JSON here.."></textarea>
  </div>
</form>
</div>

</div>
</ng-container>

<div class="modal right fade" id="c2dmessageModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel2">
  <div class="modal-dialog" role="document">
    <app-message-modal *ngIf="c2dMessageDetail" [bodyMessage]="c2dMessageDetail" [headerMessage]="'C2D Message'"
    (modalEvents)="onModalEvents($event)"></app-message-modal>
    <app-message-modal *ngIf="c2dResponseDetail" [bodyMessage]="c2dResponseDetail" [headerMessage]="'C2D Response'"
    (modalEvents)="onModalEvents($event)"></app-message-modal>
  </div>
</div>
