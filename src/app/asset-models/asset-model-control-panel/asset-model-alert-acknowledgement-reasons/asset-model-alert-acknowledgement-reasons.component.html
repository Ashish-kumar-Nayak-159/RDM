<div class="tab-bar" *ngIf="decodedToken?.privileges && decodedToken.privileges.indexOf('ASMMM') > -1">
  <div class="">
    <ul class="nav">
      <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" (click)="addReason()"
          [class.disabled]="ReasonBtnClicked || isUpdateReasonsAPILoading || assetModel.freezed">
          <i class="fa fa-fw fa-plus"></i>
          <span class="text-secondary">Add</span></a>
      </li>
      <!-- <li class="nav-item">
          <a class="nav-link" href="javascript:void(0)" (click)="updateReason()" [class.disabled]="isUpdateReasonsAPILoading || assetModel.freezed">
            <i class="fa fa-fw fa-save"></i>
            <span class="text-secondary">Save</span></a>
        </li> -->
      <li class="nav-item" *ngIf="isUpdateReasonsAPILoading">
        <a href="javascript:void(0)">
          <i class="fa fa-spinner fa-spin fa-fw fa-2x"></i>
        </a>
      </li>
    </ul>
  </div>
</div>


<div class="table-responsive">
  <div class="tableFixHead">
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col"class="w-25">No</th>
          <th scope="col"class="w-50">Reason</th>
          <th scope="col"class="w-25" *ngIf="decodedToken?.privileges && decodedToken.privileges.indexOf('ASMMM') > -1">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="reasonObj">
          <td></td>
          <td class="td-padding"><input #name="ngModel" validateText type="text" min="1" class="form-control form-control-sm w-50" id="name"
              placeholder="Add Reason *" [(ngModel)]="reasonObj.reason" name="name">
              <div *ngIf="name.errors?.whitespace && name.touched" class="alert-danger">
                Please enter valid reason.
              </div>  
          </td>
          <td *ngIf="decodedToken?.privileges && decodedToken.privileges.indexOf('ASMMM') > -1"><a
              href="javascript:void(0)" placement="bottom" tooltip="Cancel"
              (click)="reasonObj = undefined; ReasonBtnClicked = false;"><i class="fa fa-times"></i></a>
            <a href="javascript:void(0)" placement="bottom" class="ml-2" tooltip="Save Reason"
              (click)="updateReason()"><i class="fa fa-check"></i></a>
          </td>
        </tr>
        <ng-container *ngIf="ackReasons.length > 0">
          <tr *ngFor="let ack of ackReasons; let i = index;">
            <td>{{i + 1}}</td>
            <!-- <td >{{ack.reason}}</td> -->
            <td [ngClass]="{'td-padding': isEnableEdit && isEnableEdit[i]}">
              <ng-container *ngIf="isEnableEdit && !isEnableEdit[i]">
                {{ack.reason}}
              </ng-container>
              <ng-container *ngIf="isEnableEdit && isEnableEdit[i]">
                <input #name="ngModel" validateText type="text" class="form-control form-control-sm small w-50" [(ngModel)]="ack.reason"
                  name="{{ack.reason}}">
                  <div *ngIf="name.errors?.whitespace && name.touched" class="alert-danger">
                    Please enter valid reason.
                  </div>  
              </ng-container>
            </td>
            <td *ngIf="decodedToken?.privileges && decodedToken.privileges.indexOf('ASMMM') > -1">
              <a href="javascript:void(0)" placement="bottom" tooltip="Edit Reasons"
                [class.disabled]="assetModel.freezed" *ngIf="isEnableEdit && !isEnableEdit[i]"><i class="fa fa-edit"
                  (click)="enableEditMethod(i)"></i></a>
              <a href="javascript:void(0)" placement="bottom" tooltip="Cancel" *ngIf="isEnableEdit && isEnableEdit[i]"
                (click)="onCancelClick(ack.reason, ack.id, i);"><i class="fa fa-times"></i></a>
              <a href="javascript:void(0)" placement="bottom" class="ml-2" tooltip="Save Reason"
                *ngIf="isEnableEdit && isEnableEdit[i]" (click)="onSaveReason(ack.reason, ack.id, i);"><i
                  class="fa fa-check"></i></a>
              <a href="javascript:void(0)" class="ml-2" placement="bottom" tooltip="Delete"
                [class.disabled]="assetModel.freezed" (click)="openModal('confirmMessageModal', ack.id, i)">
                <i class="fa fa-trash fa-sm"></i> </a>
            </td>
          </tr>
        </ng-container>
        <tr *ngIf="ackReasons.length === 0 && !firstReasonAdded">
          <td colspan="3">No Acknowledge Reasons added.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>


<div class="modal fade" id="confirmMessageModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel2">
  <div class="modal-dialog" role="document">
    <app-confirm-modal *ngIf="modalConfig" [bodyMessage]="'Are you sure you want to remove this reason?'"
      [headerMessage]="'Remove Reason'" (modalEvents)="onModalEvents($event)" [modalConfig]="modalConfig">
    </app-confirm-modal>
  </div>
</div>
